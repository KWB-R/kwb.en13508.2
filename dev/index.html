<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Read and Write CCTV Inspection Data According to Norm
    EN13508-2 • kwb.en13508.2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Read and Write CCTV Inspection Data According to Norm
    EN13508-2">
<meta property="og:description" content="functions to read and write CCTV inspections
    according to EN13508-2.">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">kwb.en13508.2</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kwb-r/kwb.en13508.2">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<p>This R package provides functions to read and write data on CCTV sewerage inspections. The format expected when reading and generated when writing is the text format that is described in the European Norm <a href="http://www.dwa.de/dwa/shop/shop.nsf/Produktanzeige?openform&amp;produktid=P-DWAA-8KTG5R">EN 13508-2</a>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>For details on how to install KWB-R packages checkout our <a href="https://kwb-r.github.io/kwb.pkgbuild/articles/install.html">installation tutorial</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">### Optionally: specify GitHub Personal Access Token (GITHUB_PAT)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">### See here why this might be important for you:</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">### https://kwb-r.github.io/kwb.pkgbuild/articles/install.html#set-your-github_pat</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co"># Sys.setenv(GITHUB_PAT = "mysecret_access_token")</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co"># Install package "remotes" from CRAN</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="cf">if</span> (<span class="op">!</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="st">"remotes"</span>)) {</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"remotes"</span>, <span class="dt">repos =</span> <span class="st">"https://cloud.r-project.org"</span>)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co"># Install KWB package 'kwb.en13508.2' from GitHub</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"></a>
<a class="sourceLine" id="cb1-14" data-line-number="14">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"kwb-r/kwb.en13508.2"</span>)</a></code></pre></div>
</div>
<div id="load-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#load-the-package" class="anchor"></a>Load the Package</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(kwb.en13508<span class="fl">.2</span>)</a></code></pre></div>
</div>
<div id="read-a-file-encoded-in-en-13508-2-format" class="section level2">
<h2 class="hasAnchor">
<a href="#read-a-file-encoded-in-en-13508-2-format" class="anchor"></a>Read a File Encoded in EN 13508.2 Format</h2>
<p>You can read a file formatted in EN 13508.2 text format using <code><a href="reference/readEuCodedFile.html">readEuCodedFile()</a></code>.</p>
<p>For the purpose of demonstration, we load an example file that is contained in the package:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Set the relative path to the example file</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">file_path &lt;-<span class="st"> "extdata/example_13508_2.txt"</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co"># Set the absolute path to the example file in the package folder</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">input_file &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(file_path, <span class="dt">package =</span> <span class="st">"kwb.en13508.2"</span>)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co"># Read the example file</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">survey &lt;-<span class="st"> </span><span class="kw"><a href="reference/readEuCodedFile.html">readEuCodedFile</a></span>(input_file)</a></code></pre></div>
<p>The result is a list with the three components representing the A-, B- and C- parts, respectively, of the file:</p>
<ul>
<li>
<code>header.info</code>: A-part containing information on the file format</li>
<li>
<code>inspections</code>: B-parts containing information on the inspections as a whole</li>
<li>
<code>observations</code>: C-parts containing information on the detailed observations that were made during the inspections</li>
</ul>
<div id="part-a-information-on-the-file-format" class="section level3">
<h3 class="hasAnchor">
<a href="#part-a-information-on-the-file-format" class="anchor"></a>Part A: Information on the file format</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">survey<span class="op">$</span>header.info</a></code></pre></div>
</div>
<div id="part-b-inspections" class="section level3">
<h3 class="hasAnchor">
<a href="#part-b-inspections" class="anchor"></a>Part B: Inspections</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(survey<span class="op">$</span>inspections)</a></code></pre></div>
<p>The codes used as column names correspond to the codes defined in the norm. We provide a function <code><a href="reference/getCodes.html">getCodes()</a></code> in the package that returns a table mapping these codes to their meanings:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Get all codes and meanings defined in the European Norm</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">code_info &lt;-<span class="st"> </span><span class="kw"><a href="reference/getCodes.html">getCodes</a></span>(<span class="dt">fields =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Code"</span>, <span class="st">"Text_EN"</span>))</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Show the meanings for the codes that are used in the table of inspections</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">code_info[code_info<span class="op">$</span>Code <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(survey<span class="op">$</span>inspections), ]</a></code></pre></div>
</div>
<div id="part-c-observations" class="section level3">
<h3 class="hasAnchor">
<a href="#part-c-observations" class="anchor"></a>Part C: Observations</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(survey<span class="op">$</span>observations)</a></code></pre></div>
<p>Again, let’s have a look at what the columns mean:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Show the meanings for the codes that are used in the table of observations</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">code_info[code_info<span class="op">$</span>Code <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(survey<span class="op">$</span>observations), ]</a></code></pre></div>
<p>The column <code>inspno</code> groups together observations that belong to the same inspection. The number in the column refers to the row number in the table of inspections (<code>survey$inspections</code>). For example, to get all the observations that belong to the third inspection, you may filter <code>survey$observations</code> like in the following. For a more compact output we exclude the tenth column (“F”) containing the remarks:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">survey<span class="op">$</span>observations[survey<span class="op">$</span>observations<span class="op">$</span>inspno <span class="op">==</span><span class="st"> </span><span class="dv">3</span>, <span class="dv">-10</span>]</a></code></pre></div>
<p>The information on the inspection is found in the <code>inspno</code>-th row (here: third row) of <code>config$inspections</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">survey<span class="op">$</span>inspections[<span class="dv">3</span>, ]</a></code></pre></div>
</div>
</div>
<div id="write-a-file-encoded-in-en-13508-2-format" class="section level2">
<h2 class="hasAnchor">
<a href="#write-a-file-encoded-in-en-13508-2-format" class="anchor"></a>Write a File Encoded in EN 13508.2 Format</h2>
<p>Once you have prepared a list with the three components <code>header.info</code>, <code>inspections</code> and <code>observations</code> as described above, you can use the function <code><a href="reference/writeEuCodedFile.html">writeEuCodedFile()</a></code> to write a file formatted in EN 13508.2-format:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Define the path to an output file</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">output_file &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"example_en13508.2.txt"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co"># Write the CCTV survey data to the file</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw"><a href="reference/writeEuCodedFile.html">writeEuCodedFile</a></span>(survey, output_file)</a></code></pre></div>
<p>The first 20 lines of the file produced read:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">kwb.utils<span class="op">::</span><span class="kw">catLines</span>(<span class="kw"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span>(output_file, <span class="dv">20</span>))</a></code></pre></div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/kwb-r/kwb.en13508.2">https://​github.com/​kwb-r/​kwb.en13508.2</a>
</li>
<li>Report a bug at <br><a href="https://github.com/kwb-r/kwb.en13508.2/issues">https://​github.com/​kwb-r/​kwb.en13508.2/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/hsonne">Hauke Sonnenberg</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9134-2871" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://ci.appveyor.com/project/KWB-R/kwb-en13508-2/branch/master"><img src="https://ci.appveyor.com/api/projects/status/i5xx4npr86rg783h/branch/master?svg=true" alt="Appveyor build status"></a></li>
<li><a href="https://travis-ci.org/KWB-R/kwb.en13508.2"><img src="https://travis-ci.org/KWB-R/kwb.en13508.2.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/github/KWB-R/kwb.en13508.2"><img src="https://codecov.io/github/KWB-R/kwb.en13508.2/branch/master/graphs/badge.svg" alt="codecov"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="lifecycle"></a></li>
<li><a href="http://cran.r-project.org/package=kwb.en13508.2"><embed src="http://www.r-pkg.org/badges/version/kwb.en13508.2"></embed></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/hsonne">Hauke Sonnenberg</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
